<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Announcements</title>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet" />
    <style>
      .css-editor {
        background: #f5f5f5;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 16px;
        margin: 24px auto 16px auto;
        max-width: 600px;
        font-family: 'Ubuntu', Arial, sans-serif;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      }
      .css-editor label {
        font-weight: 600;
        margin-right: 8px;
      }
      .css-editor input[type="color"] {
        vertical-align: middle;
      }
      .css-editor input[type="number"] {
        width: 60px;
      }
    </style>
  </head>
</html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Squadron Announcements - Civil Air Patrol</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body style="font-family: 'Ubuntu', Arial, sans-serif; background: linear-gradient(135deg, #001489 0%, #0056d2 100%); color: #333; line-height: 1.6; padding: 20px; min-height: 100vh; margin: 0;">

<div style="max-width: 1000px; margin: 0 auto; background: #fff; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); border-radius: 12px; overflow: hidden;">
  
  <div style="background: linear-gradient(135deg, #001489 0%, #003ab8 100%); color: #fff; padding: 50px 40px; text-align: center; position: relative; overflow: hidden; border-top: 6px solid; border-image: linear-gradient(90deg, #FFCD00 0%, #BA0C2F 50%, #FFCD00 100%) 1;">
      <h1 style="
        font-size: clamp(1.5em, 5vw, 2.8em);
        margin: 0 0 10px 0;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 2px 8px rgba(0,0,0,0.25), 0 0 2px #fff;
        line-height: 1.1;
        color: #fff;
        background: rgba(0,0,0,0.08);
        border-radius: 8px;
        padding: 0.2em 0.5em;
        display: inline-block;
        word-break: break-word;
      ">
        Squadron Announcements
      </h1>
      <p style="
        font-size: clamp(1em, 2.5vw, 1.3em);
        font-weight: 500;
        opacity: 0.98;
        margin: 0;
        color: #FFCD00;
        text-shadow: 0 1px 4px rgba(0,0,0,0.18);
        background: rgba(0,0,0,0.05);
        border-radius: 6px;
        padding: 0.15em 0.4em;
        display: inline-block;
        word-break: break-word;
      ">
        Civil Air Patrol - Heartland Composite Squadron
      </p>
    </div>


    <div style="margin-bottom: 50px;">
      <div id="meetings-section"></div>
    </div>
    <div style="margin-bottom: 50px;">
      <div id="general-section"></div>
    </div>
    <div style="margin-bottom: 50px;">
      <div id="opportunities-section"></div>
    </div>
    <div style="margin-bottom: 50px;">
      <div id="wing-section"></div>
    </div>

  </div>

  <div class="footer" style="background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); padding: 30px; text-align: center; font-size: 1em; color: #666; border-top: 6px solid; border-image: linear-gradient(90deg, #FFCD00 0%, #BA0C2F 50%, #001489 100%) 1;">
    <strong>Remember to "Reply All" if you have questions or need clarification on anything listed above.</strong>
    <br><br>
    <a href="admin.html" style="color:#001489; font-weight:600; text-decoration:underline;">Admin Login</a>
  </div>
  <script>
    // Template rendering functions
    function renderMeeting(m) {
      const t = m.template || 'card';
      if (m.noMeeting) {
        if (t === 'highlight') {
          return `<div class="meeting no-meeting" style="background:linear-gradient(135deg,#fff3cd 0%,#fffbea 100%);border-left:5px solid #FFCD00;text-align:center;font-size:1.3em;font-weight:800;color:#856404;box-shadow:0 4px 15px rgba(0,0,0,0.08);">NO MEETING</div>`;
        }
        // default
        return `<div class="meeting no-meeting">NO MEETING</div>`;
      }
      if (t === 'card') {
        return `<div class="meeting"><h3>${m.date} - ${m.title}</h3><div><strong>Location:</strong> ${m.location}</div><div><strong>UOD:</strong> ${m.uod}</div><div><strong>Details:</strong> ${m.details}</div><div><strong>Cadets:</strong> ${m.cadets}</div><div><strong>Primary AM:</strong> ${m.am}</div></div>`;
      } else if (t === 'simple') {
        return `<div class="meeting" style="background:#f4f8ff;border-left:3px solid #003ab8;"><strong>${m.date}:</strong> ${m.title} (${m.location})</div>`;
      } else if (t === 'highlight') {
        return `<div class="meeting" style="background:linear-gradient(135deg,#e0ffe0 0%,#f9fff9 100%);border-left:5px solid #28a745;"><h3 style="color:#28a745;">${m.title}</h3><div><strong>Date:</strong> ${m.date}</div><div><strong>Location:</strong> ${m.location}</div></div>`;
      }
      return `<div class="meeting">${m.title}</div>`;
    }
    function renderOpportunity(o) {
      const t = o.template || 'card';
      if (t === 'card') {
        return `<div class="opportunity"><h3>${o.title}</h3><div><strong>Open to:</strong> ${o.openTo}</div><div>${o.details}</div>${o.link ? `<div><a href="${o.link}" target="_blank">${o.linkText}</a></div>` : ''}</div>`;
      } else if (t === 'simple') {
        return `<div class="opportunity" style="background:#f4f8ff;border-left:3px solid #003ab8;"><strong>${o.title}</strong> - ${o.details}</div>`;
      } else if (t === 'highlight') {
        return `<div class="opportunity" style="background:linear-gradient(135deg,#fffbe0 0%,#fff9e6 100%);border-left:5px solid #FFCD00;"><h3 style="color:#FFCD00;">${o.title}</h3><div>${o.details}</div></div>`;
      }
      return `<div class="opportunity">${o.title}</div>`;
    }
    function renderAnnouncement(w) {
      const t = w.template || 'card';
      if (t === 'card') {
        return `<div class="announcement"><h3>${w.title}</h3><div>${w.details}</div></div>`;
      } else if (t === 'simple') {
        return `<div class="announcement" style="background:#f4f8ff;border-left:3px solid #003ab8;"><strong>${w.title}:</strong> ${w.details}</div>`;
      } else if (t === 'highlight') {
        return `<div class="announcement" style="background:linear-gradient(135deg,#ffe0e0 0%,#fff9f9 100%);border-left:5px solid #BA0C2F;"><h3 style="color:#BA0C2F;">${w.title}</h3><div>${w.details}</div></div>`;
      }
      return `<div class="announcement">${w.title}</div>`;
    }

    // Load announcements data from localStorage or use defaults
    function getData() {
      const data = localStorage.getItem('announcementsData');
      if (data) return JSON.parse(data);
      // Default data structure
      return {
        meetings: [],
        general: '',
        opportunities: [],
        wing: []
      };
    }
    function renderAll() {
      const data = getData();
      // Render meetings
      const meetingsSection = document.getElementById('meetings-section');
      meetingsSection.innerHTML = '<h2>Upcoming Squadron Meetings</h2>' + (data.meetings||[]).map(renderMeeting).join('');
      // Render general info
      document.getElementById('general-section').innerHTML = '<h2>General Squadron Information</h2><div class="meeting">' + (data.general||'') + '</div>';
      // Render opportunities
      document.getElementById('opportunities-section').innerHTML = '<h2>Ongoing Opportunities</h2>' + (data.opportunities||[]).map(renderOpportunity).join('');
      // Render wing announcements
      document.getElementById('wing-section').innerHTML = '<h2>Wing & Higher Command Announcements</h2>' + (data.wing||[]).map(renderAnnouncement).join('');
    }
    // Run on page load
    renderAll();
  </script>
</body>
</html>